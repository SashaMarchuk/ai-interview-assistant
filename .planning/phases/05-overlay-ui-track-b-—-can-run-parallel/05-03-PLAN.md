---
phase: 05-overlay-ui
plan: 03
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - src/overlay/TranscriptPanel.tsx
  - src/overlay/ResponsePanel.tsx
autonomous: true

must_haves:
  truths:
    - "Transcript panel displays speaker labels in distinct colors"
    - "Transcript panel auto-scrolls to show newest entries"
    - "Response panel shows fast hint and full answer in separate sections"
    - "Empty states show helpful placeholder text"
    - "Both panels handle variable content length gracefully"
  artifacts:
    - path: "src/overlay/TranscriptPanel.tsx"
      provides: "Transcript display with speaker labels and auto-scroll"
      min_lines: 40
    - path: "src/overlay/ResponsePanel.tsx"
      provides: "Dual response display (fast hint + full answer)"
      min_lines: 30
  key_links:
    - from: "src/overlay/TranscriptPanel.tsx"
      to: "src/overlay/hooks/useAutoScroll.ts"
      via: "import useAutoScroll"
      pattern: "useAutoScroll"
    - from: "src/overlay/TranscriptPanel.tsx"
      to: "src/types/transcript.ts"
      via: "import type { TranscriptEntry }"
      pattern: "TranscriptEntry"
---

<objective>
Create TranscriptPanel and ResponsePanel components for displaying live transcript and dual AI responses.

Purpose: Build the content panels that will display transcript with speaker labels (auto-scrolling) and the dual LLM response format (fast hint + full answer). These use mock data now and will receive real data in Phase 7.

Output: TranscriptPanel.tsx with speaker-labeled entries and auto-scroll, ResponsePanel.tsx with fast hint and full answer sections.
</objective>

<execution_context>
@/Users/sasha-marchuk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sasha-marchuk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-overlay-ui-track-b-—-can-run-parallel/05-RESEARCH.md
@.planning/phases/05-overlay-ui-track-b-—-can-run-parallel/05-01-SUMMARY.md

# Files to reference (created in Plan 01)
@src/types/transcript.ts
@src/overlay/hooks/useAutoScroll.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TranscriptPanel with speaker labels and auto-scroll</name>
  <files>src/overlay/TranscriptPanel.tsx</files>
  <action>
Create `src/overlay/TranscriptPanel.tsx`:

```typescript
import { useAutoScroll } from './hooks/useAutoScroll';
import type { TranscriptEntry } from '../types/transcript';

interface TranscriptPanelProps {
  entries: TranscriptEntry[];
}

/**
 * Returns color classes based on speaker name.
 * "You" gets blue, "Interviewer" gets purple, others get gray.
 */
function getSpeakerColor(speaker: string): string {
  switch (speaker.toLowerCase()) {
    case 'you':
    case 'me':
      return 'text-blue-600';
    case 'interviewer':
      return 'text-purple-600';
    default:
      // For speaker diarization labels like "Speaker 1", "Speaker 2"
      return 'text-gray-600';
  }
}

/**
 * Transcript panel displaying live transcript with speaker labels.
 * Auto-scrolls to bottom when new entries are added.
 */
export function TranscriptPanel({ entries }: TranscriptPanelProps) {
  // Auto-scroll when entry count changes
  const bottomRef = useAutoScroll(entries.length);

  return (
    <div className="flex-shrink-0">
      <div className="text-xs font-medium text-gray-500 mb-1 flex items-center justify-between">
        <span>Transcript</span>
        {entries.length > 0 && (
          <span className="text-gray-400">
            {entries.length} {entries.length === 1 ? 'entry' : 'entries'}
          </span>
        )}
      </div>

      <div className="bg-gray-50 rounded p-2 h-28 overflow-y-auto">
        {entries.length === 0 ? (
          <div className="h-full flex items-center justify-center">
            <span className="text-sm text-gray-400 italic">
              Waiting for audio...
            </span>
          </div>
        ) : (
          <>
            {entries.map((entry) => (
              <div
                key={entry.id}
                className={`text-sm mb-1.5 last:mb-0 ${
                  !entry.isFinal ? 'opacity-60' : ''
                }`}
              >
                <span className={`font-medium ${getSpeakerColor(entry.speaker)}`}>
                  {entry.speaker}:
                </span>{' '}
                <span className="text-gray-700">
                  {entry.text}
                  {!entry.isFinal && (
                    <span className="ml-1 text-gray-400 italic">...</span>
                  )}
                </span>
              </div>
            ))}
            {/* Scroll anchor - auto-scroll target */}
            <div ref={bottomRef} />
          </>
        )}
      </div>
    </div>
  );
}
```

Key points:
- Uses useAutoScroll hook with entries.length as dependency
- Speaker colors: You=blue, Interviewer=purple, others=gray
- Interim (non-final) results shown at 60% opacity with "..." indicator
- Entry count shown in header
- Empty state centered vertically
- Scroll anchor div at bottom for auto-scroll target
  </action>
  <verify>
Run `npx tsc --noEmit` to verify no type errors.
Confirm file exists at src/overlay/TranscriptPanel.tsx.
  </verify>
  <done>
src/overlay/TranscriptPanel.tsx exports TranscriptPanel component.
Component displays speaker labels with color coding.
Auto-scroll implemented via useAutoScroll hook.
Empty state and interim result styles implemented.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ResponsePanel with fast hint and full answer sections</name>
  <files>src/overlay/ResponsePanel.tsx</files>
  <action>
Create `src/overlay/ResponsePanel.tsx`:

```typescript
import type { LLMResponse } from '../types/transcript';

interface ResponsePanelProps {
  response: LLMResponse | null;
}

/**
 * Status indicator showing current response state.
 */
function StatusIndicator({ status }: { status: LLMResponse['status'] }) {
  switch (status) {
    case 'pending':
      return (
        <span className="flex items-center gap-1 text-xs text-yellow-600">
          <span className="w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></span>
          Thinking...
        </span>
      );
    case 'streaming':
      return (
        <span className="flex items-center gap-1 text-xs text-blue-600">
          <span className="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></span>
          Streaming...
        </span>
      );
    case 'complete':
      return (
        <span className="flex items-center gap-1 text-xs text-green-600">
          <span className="w-2 h-2 bg-green-400 rounded-full"></span>
          Complete
        </span>
      );
    case 'error':
      return (
        <span className="flex items-center gap-1 text-xs text-red-600">
          <span className="w-2 h-2 bg-red-400 rounded-full"></span>
          Error
        </span>
      );
  }
}

/**
 * Response panel displaying dual AI responses: fast hint and full answer.
 * Designed for the interview assistant use case where user needs
 * quick guidance immediately, with comprehensive answer streaming in.
 */
export function ResponsePanel({ response }: ResponsePanelProps) {
  return (
    <div className="flex-1 flex flex-col min-h-0">
      <div className="text-xs font-medium text-gray-500 mb-1 flex items-center justify-between">
        <span>AI Response</span>
        {response && <StatusIndicator status={response.status} />}
      </div>

      <div className="flex-1 bg-gray-50 rounded p-2 overflow-y-auto">
        {!response ? (
          <div className="h-full flex items-center justify-center">
            <span className="text-sm text-gray-400 italic text-center px-4">
              Hold hotkey to capture question...
            </span>
          </div>
        ) : response.status === 'error' ? (
          <div className="text-sm text-red-600">
            <span className="font-medium">Error:</span>{' '}
            {response.error || 'An error occurred'}
          </div>
        ) : (
          <div className="space-y-3">
            {/* Fast Hint Section */}
            {response.fastHint && (
              <div className="text-sm">
                <div className="flex items-center gap-1 mb-1">
                  <span className="font-medium text-green-600">Quick Hint</span>
                  <span className="text-xs text-gray-400">— start talking</span>
                </div>
                <div className="text-gray-700 bg-green-50 rounded p-2 border-l-2 border-green-400">
                  {response.fastHint}
                </div>
              </div>
            )}

            {/* Full Answer Section */}
            {response.fullAnswer && (
              <div className="text-sm">
                <div className="flex items-center gap-1 mb-1">
                  <span className="font-medium text-purple-600">Full Answer</span>
                  <span className="text-xs text-gray-400">— detailed response</span>
                </div>
                <div className="text-gray-700 bg-purple-50 rounded p-2 border-l-2 border-purple-400">
                  {response.fullAnswer}
                </div>
              </div>
            )}

            {/* Pending state with no content yet */}
            {response.status === 'pending' && !response.fastHint && !response.fullAnswer && (
              <div className="text-sm text-gray-400 italic text-center py-4">
                Processing your question...
              </div>
            )}
          </div>
        )}
      </div>
    </div>
  );
}
```

Key points:
- Fast Hint section with green accent (labeled "start talking")
- Full Answer section with purple accent (labeled "detailed response")
- Status indicator shows pending/streaming/complete/error states
- Error state displays error message
- Empty state prompts user to use hotkey
- Both sections use left border accent for visual distinction
- Flexible height with min-h-0 for proper flex behavior
  </action>
  <verify>
Run `npx tsc --noEmit` to verify no type errors.
Confirm file exists at src/overlay/ResponsePanel.tsx.
  </verify>
  <done>
src/overlay/ResponsePanel.tsx exports ResponsePanel component.
Component displays fast hint (green) and full answer (purple) sections.
Status indicator shows current response state.
Empty state and error state handled.
  </done>
</task>

</tasks>

<verification>
1. Run `npx tsc --noEmit` - no TypeScript errors
2. Run `npm run build` - build succeeds
3. Confirm files exist:
   - src/overlay/TranscriptPanel.tsx
   - src/overlay/ResponsePanel.tsx
4. Verify imports resolve correctly (useAutoScroll, TranscriptEntry, LLMResponse)
</verification>

<success_criteria>
- TranscriptPanel displays entries with speaker-colored labels
- TranscriptPanel auto-scrolls when entries change
- TranscriptPanel shows interim results with opacity and "..." indicator
- ResponsePanel shows fast hint in green section and full answer in purple section
- ResponsePanel displays status indicator (pending/streaming/complete/error)
- Both panels have appropriate empty states
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-overlay-ui-track-b-—-can-run-parallel/05-03-SUMMARY.md`
</output>
