---
phase: 01-foundation
plan: 04
type: execute
wave: 3
depends_on: ["01-02", "01-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Extension installs via Load unpacked without errors"
    - "Popup shows UI and Service Worker connection works"
    - "Offscreen Document creates successfully"
    - "Content Script injects overlay on Google Meet"
    - "No CSP errors appear in any console"
  artifacts: []
  key_links: []
---

<objective>
Verify complete extension functionality by loading in Chrome and testing all communication paths.

Purpose: Confirm Phase 1 success criteria are met before proceeding to parallel tracks.
Output: Verified working extension ready for Phase 2/3/4/5/6 parallel development.
</objective>

<execution_context>
@/Users/sasha-marchuk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sasha-marchuk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
@.planning/phases/01-foundation/01-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build extension for production verification</name>
  <files></files>
  <action>
    Build the extension in production mode to verify there are no build-time issues:

    ```bash
    npm run build
    ```

    Verify the build output in `.output/chrome-mv3/`:
    - manifest.json exists and has correct permissions
    - background.js exists (service worker)
    - popup/index.html exists
    - offscreen.html exists
    - content-scripts/ folder exists

    Check manifest.json has:
    - "manifest_version": 3
    - permissions array includes: tabCapture, activeTab, offscreen, storage, scripting
    - host_permissions includes: https://meet.google.com/*
    - content_security_policy with connect-src for ElevenLabs and OpenRouter

    If any issues, fix them before proceeding to verification checkpoint.
  </action>
  <verify>
    `npm run build` exits with code 0.
    `.output/chrome-mv3/manifest.json` contains all required fields.
    No TypeScript or build errors in output.
  </verify>
  <done>
    Production build succeeds.
    All extension files present in output directory.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete Phase 1 Foundation extension with:
    - Service Worker handling messages
    - Popup UI with connection test buttons
    - Offscreen Document for future WebSocket
    - Content Script with placeholder overlay on Google Meet
  </what-built>

  <how-to-verify>
    1. **Load Extension:**
       - Open Chrome and navigate to `chrome://extensions`
       - Enable "Developer mode" (toggle in top-right)
       - Click "Load unpacked"
       - Select the `.output/chrome-mv3/` folder
       - Extension should appear with "AI Interview Assistant" name

    2. **Test Popup & Service Worker:**
       - Click the extension icon in toolbar
       - Popup should show styled UI with two sections
       - Click "Test Connection" button
       - Should show "Connected" and round trip time (< 100ms expected)

    3. **Test Offscreen Document:**
       - In popup, click "Create Offscreen" button
       - Status should change to "Created successfully"
       - In chrome://extensions, click "service worker" link to open DevTools
       - Console should show "Offscreen document is ready"

    4. **Test Content Script on Google Meet:**
       - Navigate to https://meet.google.com/
       - The overlay should NOT appear on landing page (correct behavior)
       - Start or join a meeting (or navigate to a URL like meet.google.com/abc-defg-hij)
       - Overlay should appear in bottom-right corner
       - Click minimize button (-) - should collapse to small button
       - Click "AI Assistant" button - should expand back

    5. **Check for CSP Errors:**
       - Open DevTools Console on the Google Meet page
       - Open DevTools Console in extension service worker
       - Open DevTools for offscreen document (click "offscreen.html" in chrome://extensions)
       - Verify NO "Content Security Policy" errors appear

    **Expected Result:**
    - All tests pass
    - No errors in any console
    - Extension is ready for parallel track development
  </how-to-verify>

  <resume-signal>
    Type "approved" if all tests pass.
    If issues found, describe what failed and I'll fix it.
  </resume-signal>
</task>

</tasks>

<verification>
Human verification covers all Phase 1 success criteria:
1. User can install extension via "Load unpacked" and see popup when clicking extension icon
2. Popup can send message to Service Worker and receive response
3. Content Script can inject placeholder UI into Google Meet page
4. Offscreen Document can be created and communicates with Service Worker
5. Extension console shows no CSP errors when loading
</verification>

<success_criteria>
All 5 Phase 1 success criteria from ROADMAP.md are verified:
- Extension loads via "Load unpacked"
- Popup-to-ServiceWorker messaging works
- Content Script injects placeholder on Google Meet meetings
- Offscreen Document creation works
- No CSP errors in any console
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-04-SUMMARY.md`
</output>
