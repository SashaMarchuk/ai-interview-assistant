---
phase: 06-prompts-settings
plan: 04
type: execute
wave: 3
depends_on: ["06-02", "06-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can enter API keys for ElevenLabs and OpenRouter in settings"
    - "User can select different models for fast hint vs full answer"
    - "User can switch between System Design, Coding, and Behavioral templates"
    - "User can create and save custom prompt templates"
    - "All settings persist across browser sessions"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete Phase 6 implementation by testing all settings and template functionality.

Purpose: Confirm all Phase 6 success criteria are met before marking the phase complete.

Output: Human verification that all Prompts & Settings features work correctly.
</objective>

<execution_context>
@/Users/sasha-marchuk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sasha-marchuk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-prompts-settings/06-RESEARCH.md

# Prior plan outputs
@.planning/phases/06-prompts-settings/06-01-SUMMARY.md
@.planning/phases/06-prompts-settings/06-02-SUMMARY.md
@.planning/phases/06-prompts-settings/06-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Prompts & Settings system with:
- Zustand store with chrome.storage persistence
- Settings panel with API keys, model selection, hotkeys, blur level
- Template manager with CRUD operations
- Three default templates (System Design, Coding, Behavioral)
- Variable substitution system for prompts
  </what-built>
  <how-to-verify>
**Prerequisites:**
1. Build the extension: `npm run build`
2. Load extension in Chrome: chrome://extensions > Load unpacked > select `.output/chrome-mv3` folder

**Test 1: API Key Settings (SET-01)**
1. Click extension icon to open popup
2. In Settings tab, locate API Keys section
3. Enter a test value in ElevenLabs field: `test-eleven-labs-key`
4. Enter a test value in OpenRouter field: `test-openrouter-key`
5. Close the popup
6. Reopen the popup
7. Verify: Both API key values are still present (masked as password)
8. Click "Show" buttons to verify the actual values saved correctly

**Test 2: Model Selection (SET-02)**
1. In Settings tab, locate Models section
2. Change Fast Model dropdown to a different option
3. Change Full Model dropdown to a different option
4. Close and reopen popup
5. Verify: Both model selections persist

**Test 3: Hotkey Settings (SET-03)**
1. In Settings tab, locate Hotkeys section
2. Change the capture hotkey to a new value: `Ctrl+Shift+H`
3. Close and reopen popup
4. Verify: Hotkey value persists

**Test 4: Blur Level (SET-04)**
1. In Settings tab, locate Appearance/Blur section
2. Move slider to different positions (0, 10, 20)
3. Close and reopen popup
4. Verify: Blur level persists at last set value

**Test 5: Default Templates (PRM-05)**
1. Switch to Templates tab
2. Verify: Three templates are visible: System Design, Coding, Behavioral
3. Click on System Design template
4. Verify: Editor shows template content with system prompt and user prompt

**Test 6: Template Switching (PRM-04)**
1. In Templates tab, click on "Coding" template
2. Verify: Coding template becomes highlighted/active
3. Click on "Behavioral" template
4. Verify: Behavioral template becomes active instead

**Test 7: Create Custom Template (PRM-01)**
1. Click "New Template" button
2. Verify: New custom template appears in list
3. Edit the template name to "My Custom Template"
4. Edit the system prompt: "You are a helpful assistant."
5. Edit the user prompt template: "Question: $highlighted"
6. Close and reopen popup
7. Navigate to Templates tab
8. Verify: Custom template still exists with saved content

**Test 8: Model Override (PRM-03)**
1. Select the custom template
2. In Model Override dropdown, select a specific model
3. Close and reopen popup
4. Verify: Model override is saved for that template

**Test 9: Delete Custom Template**
1. Find your custom template in the list
2. Click the delete button
3. Verify: Template is removed from list
4. Verify: Default templates (System Design, Coding, Behavioral) do NOT have delete buttons

**Test 10: Storage Persistence (SET-05)**
1. Make various changes to settings and templates
2. Close Chrome completely
3. Reopen Chrome
4. Open the extension popup
5. Verify: All settings and custom templates persist

**Expected Results:**
- All settings save and persist correctly
- Three default templates are always present
- Custom templates can be created, edited, and deleted
- Default templates cannot be deleted
- No console errors during any operations
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe which tests failed</resume-signal>
</task>

</tasks>

<verification>
Phase 6 success criteria from ROADMAP.md:

1. User can enter API keys for ElevenLabs and OpenRouter in settings - Test 1
2. User can select different models for fast hint vs full answer - Test 2
3. User can switch between System Design, Coding, and Behavioral templates - Test 6
4. User can create and save custom prompt templates - Test 7
5. All settings persist across browser sessions - Tests 1-4, 10
</verification>

<success_criteria>
All manual tests pass:
1. API keys save and persist with show/hide functionality
2. Model selections save and persist
3. Hotkey customization saves and persists
4. Blur level saves and persists
5. Three default templates are present
6. Template switching works (active state changes)
7. Custom template creation works
8. Custom template editing works with persistence
9. Model override per template works
10. Custom template deletion works
11. Default templates cannot be deleted
12. All data persists across browser restart
13. No console errors during any operation
</success_criteria>

<output>
After verification passes, create `.planning/phases/06-prompts-settings/06-04-SUMMARY.md`
</output>
