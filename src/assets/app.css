@import 'tailwindcss';

/* Highlight.js github-dark theme for syntax highlighting in Shadow DOM.
 * Imported here so WXT's cssInjectionMode: 'ui' bundles it into the Shadow DOM
 * alongside Tailwind styles. Override background to transparent so the
 * code block background comes from CodeBlock's bg-black/40 class. */
@import 'highlight.js/styles/github-dark.min.css';

/*
 * Tailwind v4 Shadow DOM Compatibility
 *
 * Problem: Tailwind v4 uses @property CSS declarations for variable defaults,
 * but @property has no effect inside Shadow DOM.
 *
 * Solution: Provide explicit fallback values using @theme inline and :host selector.
 * This ensures spacing, colors, and effects work correctly in Shadow DOM.
 */

@theme inline {
  /* Override rem-based spacing with px values for Shadow DOM */
  --spacing-0: 0;
  --spacing-0-5: 2px;
  --spacing-1: 4px;
  --spacing-1-5: 6px;
  --spacing-2: 8px;
  --spacing-2-5: 10px;
  --spacing-3: 12px;
  --spacing-3-5: 14px;
  --spacing-4: 16px;
  --spacing-5: 20px;
  --spacing-6: 24px;
  --spacing-7: 28px;
  --spacing-8: 32px;
  --spacing-9: 36px;
  --spacing-10: 40px;
  --spacing-11: 44px;
  --spacing-12: 48px;
  --spacing-14: 56px;
  --spacing-16: 64px;
  --spacing-20: 80px;

  /* Text sizes in px for Shadow DOM */
  --text-xs: 12px;
  --text-sm: 14px;
  --text-base: 16px;
  --text-lg: 18px;
  --text-xl: 20px;
  --text-2xl: 24px;
}

/* Shadow DOM fallbacks for @property-dependent features */
:host {
  /* Override inherited user-select: none from host page (e.g. Google Meet)
   * Without this, text selection is impossible because re-resizable sets
   * userSelect: 'auto' (inherit) on its container, which inherits 'none'
   * from the shadow host's parent in the main page DOM */
  -webkit-user-select: text;
  user-select: text;
  /* Shadow/ring effect fallbacks */
  --tw-shadow: 0 0 #0000;
  --tw-shadow-colored: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-ring-offset-shadow: 0 0 #0000;

  /* Border style fallback */
  --tw-border-style: solid;

  /* Transform fallbacks */
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-rotate: 0;
  --tw-scale-x: 1;
  --tw-scale-y: 1;

  /* Backdrop filter fallbacks - need actual values for blur to work */
  --tw-backdrop-blur: blur(4px);
  --tw-backdrop-brightness: ;
  --tw-backdrop-contrast: ;
  --tw-backdrop-saturate: ;
}

/* Explicit backdrop blur for Shadow DOM since @property doesn't work */
.backdrop-blur-sm {
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
}

.backdrop-blur-md {
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
}

/* Ensure overlay container styles work in Shadow DOM */
.overlay-container {
  font-family:
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    sans-serif;
}

/* Override highlight.js default background so code block backgrounds
 * come from CodeBlock's Tailwind bg-black/40 class instead */
.hljs {
  background: transparent;
}

/* Selection tooltip arrow pointer */
.selection-tooltip-arrow {
  position: absolute;
  width: 8px;
  height: 8px;
  background: inherit;
  transform: rotate(45deg);
}

/* Selection tooltip fade-in animation */
.selection-tooltip-enter {
  opacity: 0;
  transition: opacity 150ms ease-out;
}
.selection-tooltip-enter-active {
  opacity: 1;
}

/* Quick prompt spinner -- explicit @keyframes for Shadow DOM compatibility
 * (Tailwind's animate-spin may not work due to missing @property declarations) */
@keyframes qp-spin {
  to {
    transform: rotate(360deg);
  }
}
.qp-spinner {
  animation: qp-spin 0.6s linear infinite;
  display: inline-block;
  width: 12px;
  height: 12px;
  border: 2px solid currentColor;
  border-top-color: transparent;
  border-radius: 50%;
}
